EESchema Schematic File Version 4
LIBS:SZBK07_18-cache
EELAYER 26 0
EELAYER END
$Descr A4 11693 8268
encoding utf-8
Sheet 1 1
Title "Solar Charger based on a SZBK07 module"
Date "2019-01-11"
Rev ""
Comp "farmerkeith"
Comment1 "Suitable for 36-cell solar panel (MPP at 18V)"
Comment2 ""
Comment3 ""
Comment4 ""
$EndDescr
$Comp
L Modules:SZBK07_DC-DC_module U1
U 1 1 5B485D2D
P 3950 3250
F 0 "U1" H 3850 3360 60  0000 C CNN
F 1 "SZBK07_DC-DC_module" H 3840 3510 60  0000 C CNN
F 2 "" H 3950 3200 60  0001 C CNN
F 3 "" H 3950 3200 60  0001 C CNN
	1    3950 3250
	1    0    0    -1  
$EndComp
$Comp
L power:GNDPWR #PWR02
U 1 1 5B485E0B
P 2400 2650
F 0 "#PWR02" H 2400 2450 50  0001 C CNN
F 1 "GNDPWR" H 2400 2500 50  0000 C CNN
F 2 "" H 2400 2600 50  0001 C CNN
F 3 "" H 2400 2600 50  0001 C CNN
	1    2400 2650
	1    0    0    -1  
$EndComp
$Comp
L Device:Solar_Cells SC1
U 1 1 5B485E23
P 1250 3200
F 0 "SC1" H 1350 3300 50  0000 L CNN
F 1 "Solar_Cells" H 700 3200 50  0000 L CNN
F 2 "" V 1250 3260 50  0001 C CNN
F 3 "" V 1250 3260 50  0001 C CNN
	1    1250 3200
	1    0    0    -1  
$EndComp
Text GLabel 1250 2900 0    60   Input ~ 0
Vpp
$Comp
L Device:Battery BT1
U 1 1 5B485F93
P 10300 3100
F 0 "BT1" H 10400 3200 50  0000 L CNN
F 1 "Battery" H 10400 3100 50  0000 L CNN
F 2 "" V 10300 3160 50  0001 C CNN
F 3 "" V 10300 3160 50  0001 C CNN
	1    10300 3100
	1    0    0    -1  
$EndComp
$Comp
L power:GNDPWR #PWR03
U 1 1 5B485FBA
P 10300 3300
F 0 "#PWR03" H 10300 3100 50  0001 C CNN
F 1 "GNDPWR" H 10300 3170 50  0000 C CNN
F 2 "" H 10300 3250 50  0001 C CNN
F 3 "" H 10300 3250 50  0001 C CNN
	1    10300 3300
	1    0    0    -1  
$EndComp
$Comp
L Device:R R2
U 1 1 5B4865B4
P 7900 3700
F 0 "R2" V 7980 3700 50  0000 C CNN
F 1 "100K" V 7900 3700 50  0000 C CNN
F 2 "" V 7830 3700 50  0001 C CNN
F 3 "" H 7900 3700 50  0001 C CNN
	1    7900 3700
	1    0    0    -1  
$EndComp
$Comp
L Device:R R3
U 1 1 5B48662F
P 8800 3700
F 0 "R3" V 8900 3700 50  0000 C CNN
F 1 "100K" V 8800 3700 50  0000 C CNN
F 2 "" V 8730 3700 50  0001 C CNN
F 3 "" H 8800 3700 50  0001 C CNN
	1    8800 3700
	1    0    0    -1  
$EndComp
$Comp
L Modules:AD822A U2
U 1 1 5B48809D
P 3800 4200
F 0 "U2" H 3800 4400 50  0000 L CNN
F 1 "AD822A" H 3800 4000 50  0000 L CNN
F 2 "" H 3800 4200 50  0001 C CNN
F 3 "" H 3800 4200 50  0001 C CNN
	1    3800 4200
	1    0    0    -1  
$EndComp
$Comp
L power:GND #PWR01
U 1 1 5B488158
P 2050 2650
F 0 "#PWR01" H 2050 2400 50  0001 C CNN
F 1 "GND" H 2050 2500 50  0000 C CNN
F 2 "" H 2050 2650 50  0001 C CNN
F 3 "" H 2050 2650 50  0001 C CNN
	1    2050 2650
	1    0    0    -1  
$EndComp
$Comp
L power:GND #PWR05
U 1 1 5B4881AE
P 3700 4650
F 0 "#PWR05" H 3700 4400 50  0001 C CNN
F 1 "GND" H 3700 4500 50  0000 C CNN
F 2 "" H 3700 4650 50  0001 C CNN
F 3 "" H 3700 4650 50  0001 C CNN
	1    3700 4650
	1    0    0    -1  
$EndComp
Text GLabel 10300 2800 2    60   Input ~ 0
Vbb
Text GLabel 3700 3800 0    60   Input ~ 0
+5V
Wire Wire Line
	3700 3800 3700 3900
Wire Wire Line
	3350 4100 3500 4100
$Comp
L Device:R R7
U 1 1 5B48878B
P 3200 4150
F 0 "R7" V 3280 4150 50  0000 C CNN
F 1 "3.3K" V 3200 4150 50  0000 C CNN
F 2 "" V 3130 4150 50  0001 C CNN
F 3 "" H 3200 4150 50  0001 C CNN
	1    3200 4150
	1    0    0    -1  
$EndComp
Wire Wire Line
	3200 4300 3200 4950
Wire Wire Line
	3200 4300 3500 4300
Wire Wire Line
	3700 4500 3700 4650
$Comp
L Device:R R8
U 1 1 5B48887F
P 4400 4450
F 0 "R8" V 4480 4450 50  0000 C CNN
F 1 "100K" V 4400 4450 50  0000 C CNN
F 2 "" V 4330 4450 50  0001 C CNN
F 3 "" H 4400 4450 50  0001 C CNN
	1    4400 4450
	1    0    0    -1  
$EndComp
Wire Wire Line
	4100 4200 4400 4200
Wire Wire Line
	4400 4200 4400 4300
Wire Wire Line
	4400 4600 4400 4950
Wire Wire Line
	4400 4950 3200 4950
Text GLabel 4400 4200 2    60   Input ~ 0
ArduinoPin_A1
$Comp
L Device:R R5
U 1 1 5B488988
P 2200 4100
F 0 "R5" V 2280 4100 50  0000 C CNN
F 1 "380K" V 2200 4100 50  0000 C CNN
F 2 "" V 2130 4100 50  0001 C CNN
F 3 "" H 2200 4100 50  0001 C CNN
	1    2200 4100
	1    0    0    -1  
$EndComp
$Comp
L Device:R R9
U 1 1 5B4889C5
P 2500 4650
F 0 "R9" V 2580 4650 50  0000 C CNN
F 1 "10K" V 2500 4650 50  0000 C CNN
F 2 "" V 2430 4650 50  0001 C CNN
F 3 "" H 2500 4650 50  0001 C CNN
	1    2500 4650
	1    0    0    -1  
$EndComp
$Comp
L power:GND #PWR06
U 1 1 5B488A20
P 2500 4900
F 0 "#PWR06" H 2500 4650 50  0001 C CNN
F 1 "GND" H 2500 4750 50  0000 C CNN
F 2 "" H 2500 4900 50  0001 C CNN
F 3 "" H 2500 4900 50  0001 C CNN
	1    2500 4900
	1    0    0    -1  
$EndComp
Wire Wire Line
	2500 4400 2500 4500
Wire Wire Line
	2500 4800 2500 4900
Text GLabel 2000 4400 0    60   Input ~ 0
ArduinoPin_A0
$Comp
L Device:C C1
U 1 1 5B488DB5
P 2200 4550
F 0 "C1" H 2225 4650 50  0000 L CNN
F 1 "0.1uF" H 2225 4450 50  0000 L CNN
F 2 "" H 2238 4400 50  0001 C CNN
F 3 "" H 2200 4550 50  0001 C CNN
	1    2200 4550
	1    0    0    -1  
$EndComp
Wire Wire Line
	2000 4400 2200 4400
Wire Wire Line
	2200 4400 2500 4400
Wire Wire Line
	2200 4700 2200 4900
Wire Wire Line
	2200 4900 2500 4900
Connection ~ 2200 4400
$Comp
L Device:R R6
U 1 1 5B489033
P 5950 4200
F 0 "R6" V 6030 4200 50  0000 C CNN
F 1 "150K" V 5950 4200 50  0000 C CNN
F 2 "" V 5880 4200 50  0001 C CNN
F 3 "" H 5950 4200 50  0001 C CNN
	1    5950 4200
	1    0    0    -1  
$EndComp
$Comp
L Device:R R10
U 1 1 5B489039
P 5950 4650
F 0 "R10" V 6030 4650 50  0000 C CNN
F 1 "10K" V 5950 4650 50  0000 C CNN
F 2 "" V 5880 4650 50  0001 C CNN
F 3 "" H 5950 4650 50  0001 C CNN
	1    5950 4650
	1    0    0    -1  
$EndComp
$Comp
L power:GND #PWR07
U 1 1 5B48903F
P 5950 4900
F 0 "#PWR07" H 5950 4650 50  0001 C CNN
F 1 "GND" H 5950 4750 50  0000 C CNN
F 2 "" H 5950 4900 50  0001 C CNN
F 3 "" H 5950 4900 50  0001 C CNN
	1    5950 4900
	1    0    0    -1  
$EndComp
Wire Wire Line
	5950 4350 5950 4400
Wire Wire Line
	5950 4400 5950 4500
Wire Wire Line
	5950 4800 5950 4900
Text GLabel 5350 4400 0    60   Input ~ 0
ArduinoPin_A2
$Comp
L Device:C C2
U 1 1 5B489048
P 5650 4550
F 0 "C2" H 5675 4650 50  0000 L CNN
F 1 "0.1uF" H 5675 4450 50  0000 L CNN
F 2 "" H 5688 4400 50  0001 C CNN
F 3 "" H 5650 4550 50  0001 C CNN
	1    5650 4550
	1    0    0    -1  
$EndComp
Connection ~ 5950 4400
Wire Wire Line
	5650 4700 5650 4900
Wire Wire Line
	5650 4900 5950 4900
$Comp
L Device:D_ALT D4
U 1 1 5B48ABB8
P 5000 3750
F 0 "D4" H 5000 3850 50  0000 C CNN
F 1 "1N4148" H 5000 3650 50  0000 C CNN
F 2 "" H 5000 3750 50  0001 C CNN
F 3 "" H 5000 3750 50  0001 C CNN
	1    5000 3750
	0    1    1    0   
$EndComp
$Comp
L Device:R R4
U 1 1 5B48ACD1
P 4750 3900
F 0 "R4" V 4830 3900 50  0000 C CNN
F 1 "22K" V 4750 3900 50  0000 C CNN
F 2 "" V 4680 3900 50  0001 C CNN
F 3 "" H 4750 3900 50  0001 C CNN
	1    4750 3900
	0    1    1    0   
$EndComp
Text GLabel 4600 3900 0    60   Input ~ 0
ArduinoPin_D9
Text GLabel 1850 5600 0    60   Input ~ 0
Vbb
Text GLabel 2850 5600 2    60   Input ~ 0
+7V
$Comp
L power:GND #PWR010
U 1 1 5B48C726
P 1850 5900
F 0 "#PWR010" H 1850 5650 50  0001 C CNN
F 1 "GND" H 1850 5750 50  0000 C CNN
F 2 "" H 1850 5900 50  0001 C CNN
F 3 "" H 1850 5900 50  0001 C CNN
	1    1850 5900
	1    0    0    -1  
$EndComp
$Comp
L power:GND #PWR011
U 1 1 5B48C76A
P 2850 5900
F 0 "#PWR011" H 2850 5650 50  0001 C CNN
F 1 "GND" H 2850 5750 50  0000 C CNN
F 2 "" H 2850 5900 50  0001 C CNN
F 3 "" H 2850 5900 50  0001 C CNN
	1    2850 5900
	1    0    0    -1  
$EndComp
$Comp
L Modules:ArduinoNano U4
U 1 1 5B48C7AE
P 4400 6150
F 0 "U4" H 4525 6050 50  0000 C CNN
F 1 "ArduinoNano" V 4300 6050 50  0000 C CNN
F 2 "" H 4400 6150 50  0000 C CNN
F 3 "" H 4400 6150 50  0000 C CNN
	1    4400 6150
	1    0    0    -1  
$EndComp
Text GLabel 5000 5850 2    60   Input ~ 0
ArduinoPin_A0
Text GLabel 5750 5950 2    60   Input ~ 0
ArduinoPin_A1
Text GLabel 5000 6050 2    60   Input ~ 0
ArduinoPin_A2
Text GLabel 3800 6550 0    60   Input ~ 0
ArduinoPin_D9
Wire Wire Line
	4900 5850 5000 5850
Wire Wire Line
	4900 6050 5000 6050
Wire Wire Line
	4900 5950 5750 5950
Wire Wire Line
	3900 6550 3800 6550
Text GLabel 5750 5750 2    60   Input ~ 0
+5V
$Comp
L power:GND #PWR09
U 1 1 5B48CCA3
P 3700 5750
F 0 "#PWR09" H 3700 5500 50  0001 C CNN
F 1 "GND" H 3700 5600 50  0000 C CNN
F 2 "" H 3700 5750 50  0001 C CNN
F 3 "" H 3700 5750 50  0001 C CNN
	1    3700 5750
	1    0    0    -1  
$EndComp
$Comp
L power:GND #PWR08
U 1 1 5B48CCF9
P 5150 5550
F 0 "#PWR08" H 5150 5300 50  0001 C CNN
F 1 "GND" H 5150 5400 50  0000 C CNN
F 2 "" H 5150 5550 50  0001 C CNN
F 3 "" H 5150 5550 50  0001 C CNN
	1    5150 5550
	1    0    0    -1  
$EndComp
Wire Wire Line
	4900 5750 5750 5750
Wire Wire Line
	3900 5750 3700 5750
Wire Wire Line
	4900 3900 5000 3900
Wire Wire Line
	5000 3600 5000 3200
Wire Wire Line
	5000 3200 4650 3200
Wire Notes Line
	2800 2600 2800 3400
Wire Notes Line
	2800 3400 4850 3400
Wire Notes Line
	4850 3400 4850 2600
Wire Notes Line
	4850 2600 2800 2600
Wire Notes Line
	7250 2350 7250 4150
Wire Notes Line
	7250 4150 9450 4150
Wire Notes Line
	9450 4150 9450 2350
Wire Notes Line
	9450 2350 7250 2350
Wire Wire Line
	1250 3000 1250 2900
Wire Wire Line
	10300 2800 10300 2900
Wire Notes Line
	1200 3600 1200 7000
Wire Notes Line
	1200 7000 6550 7000
Wire Notes Line
	6550 7000 6550 3600
Wire Notes Line
	6550 3600 1200 3600
Text Notes 3350 2600 0    60   ~ 0
POWER MODULE
Text Notes 8250 2250 0    60   ~ 0
MOSFET DIODE
Text Notes 1250 7000 0    60   ~ 0
MEASUREMENT AND CONTROL 
Text GLabel 1250 3400 0    60   Input ~ 0
SolarGround
Wire Wire Line
	2050 2650 2650 2650
Text GLabel 5000 3100 2    60   Input ~ 0
SolarGround
Wire Wire Line
	4750 2900 5000 2900
Wire Wire Line
	5000 2900 5000 3100
Wire Wire Line
	2200 2900 2950 2900
Wire Wire Line
	2950 2800 2650 2800
Wire Wire Line
	2650 2800 2650 2650
$Comp
L power:GND #PWR04
U 1 1 5B494DA1
P 3350 4100
F 0 "#PWR04" H 3350 3850 50  0001 C CNN
F 1 "GND" H 3350 3950 50  0000 C CNN
F 2 "" H 3350 4100 50  0001 C CNN
F 3 "" H 3350 4100 50  0001 C CNN
	1    3350 4100
	1    0    0    -1  
$EndComp
Text GLabel 3200 3900 0    60   Input ~ 0
SolarGround
Wire Wire Line
	3200 3900 3200 4000
Wire Wire Line
	2200 4250 2200 4400
Wire Wire Line
	2200 3950 2200 2900
Connection ~ 2200 2900
Text GLabel 5750 5450 2    60   Input ~ 0
+7V
Wire Wire Line
	5750 5450 4900 5450
Wire Wire Line
	5150 5550 4900 5550
Wire Notes Line
	650  2500 650  3500
Wire Notes Line
	650  3500 1600 3500
Wire Notes Line
	1600 3500 1600 2500
Wire Notes Line
	1600 2500 650  2500
Text Notes 750  2450 0    60   ~ 0
SOLAR PANEL\n0 TO 25v
Wire Notes Line
	9800 2600 9800 3500
Wire Notes Line
	9800 3500 10650 3500
Wire Notes Line
	10650 3500 10650 2600
Wire Notes Line
	10650 2600 9800 2600
Text Notes 9900 2550 0    60   ~ 0
12V BATTERY\nFLA, AGM OR Lithium
Wire Wire Line
	5350 4400 5950 4400
$Comp
L Modules:MP2307_DC-DC_module U3
U 1 1 5C31A193
P 2350 6000
F 0 "U3" H 2350 6745 60  0000 C CNN
F 1 "MP2307_DC-DC_module" H 2350 6635 60  0000 C CNN
F 2 "" H 2350 5950 60  0001 C CNN
F 3 "" H 2350 5950 60  0001 C CNN
	1    2350 6000
	1    0    0    -1  
$EndComp
Text Notes 1050 1050 0    60   ~ 0
This circuit is intended for use with a 36-cell solar panel (MPP voltage of 18V).
Wire Wire Line
	1250 2900 2200 2900
$Comp
L Modules:IRF4905 Q?
U 1 1 5C38A9FB
P 8300 2900
F 0 "Q?" V 8646 2900 50  0000 C CNN
F 1 "IRF4905" V 8553 2900 50  0000 C CNN
F 2 "TO-220" H 8500 2825 50  0001 L CIN
F 3 "http://www.vishay.com/docs/70209/70209.pdf" H 8300 2900 50  0001 L CNN
	1    8300 2900
	0    -1   -1   0   
$EndComp
$Comp
L Transistor_BJT:2N3906 Q?
U 1 1 5C395892
P 8700 3300
F 0 "Q?" H 8891 3347 50  0000 L CNN
F 1 "2N3906" H 8891 3254 50  0000 L CNN
F 2 "Package_TO_SOT_THT:TO-92_Inline" H 8900 3225 50  0001 L CIN
F 3 "https://www.fairchildsemi.com/datasheets/2N/2N3906.pdf" H 8700 3300 50  0001 L CNN
	1    8700 3300
	1    0    0    -1  
$EndComp
$Comp
L Transistor_BJT:2N3906 Q?
U 1 1 5C395913
P 8000 3300
F 0 "Q?" H 8191 3347 50  0000 L CNN
F 1 "2N3906" H 8191 3254 50  0000 L CNN
F 2 "Package_TO_SOT_THT:TO-92_Inline" H 8200 3225 50  0001 L CIN
F 3 "https://www.fairchildsemi.com/datasheets/2N/2N3906.pdf" H 8000 3300 50  0001 L CNN
	1    8000 3300
	-1   0    0    -1  
$EndComp
Wire Wire Line
	8800 3500 8800 3550
Wire Wire Line
	8500 3300 8200 3300
Wire Wire Line
	8400 3100 8400 3550
Wire Wire Line
	8400 3550 8800 3550
Connection ~ 8800 3550
Wire Wire Line
	7900 3500 7900 3550
Wire Wire Line
	7900 3550 8200 3550
Wire Wire Line
	8200 3550 8200 3300
Connection ~ 7900 3550
Connection ~ 8200 3300
Wire Wire Line
	4750 2800 7900 2800
Wire Wire Line
	8500 2800 8800 2800
$Comp
L Device:D_ALT D?
U 1 1 5C3A5AEF
P 7900 2950
F 0 "D?" V 7947 2871 50  0000 R CNN
F 1 "D_ALT" V 7854 2871 50  0000 R CNN
F 2 "" H 7900 2950 50  0001 C CNN
F 3 "~" H 7900 2950 50  0001 C CNN
	1    7900 2950
	0    -1   -1   0   
$EndComp
Connection ~ 7900 2800
Wire Wire Line
	7900 2800 8100 2800
$Comp
L Device:D_ALT D?
U 1 1 5C3A5BD6
P 8800 2950
F 0 "D?" V 8847 2871 50  0000 R CNN
F 1 "D_ALT" V 8754 2871 50  0000 R CNN
F 2 "" H 8800 2950 50  0001 C CNN
F 3 "~" H 8800 2950 50  0001 C CNN
	1    8800 2950
	0    -1   -1   0   
$EndComp
Connection ~ 8800 2800
Wire Wire Line
	8800 2800 10300 2800
Wire Wire Line
	7900 3850 8800 3850
$Comp
L power:GND #PWR?
U 1 1 5C3AF037
P 8800 3850
F 0 "#PWR?" H 8800 3600 50  0001 C CNN
F 1 "GND" H 8805 3674 50  0000 C CNN
F 2 "" H 8800 3850 50  0001 C CNN
F 3 "" H 8800 3850 50  0001 C CNN
	1    8800 3850
	1    0    0    -1  
$EndComp
Connection ~ 8800 3850
$EndSCHEMATC
